---
---

<a href="/offerte-aanvragen" class="sticky-offer-btn">
  <div class="icon-pulse"></div>
  <span class="icon">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
  </span>
  <span class="text">
    <span class="text-full">Offerte Aanvragen</span>
  </span>
</a>


<style>
  .sticky-offer-btn {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    z-index: 998; /* Below mobile menu (999) but above content */
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background-color: var(--color-primary);
    color: white;
    padding: 1rem 1.5rem;
    border-radius: 50px;
    box-shadow: 0 5px 20px rgba(227, 6, 19, 0.4);
    text-decoration: none;
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    font-family: var(--font-heading);
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.85rem;
    letter-spacing: 0.5px;
  }

  .sticky-offer-btn:hover {
    transform: translateY(-5px) scale(1.05);
    background-color: #b00000;
    box-shadow: 0 10px 30px rgba(227, 6, 19, 0.5);
  }

  .sticky-offer-btn.hide-sticky,
  .sticky-offer-btn.hide-top {
    opacity: 0;
    transform: translateY(100px);
    pointer-events: none;
  }

  .icon {
    font-size: 1.2rem;
  }

  /* Pulse Effect */
  .icon-pulse {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    border-radius: 50px;
    border: 2px solid var(--color-primary);
    animation: pulse 2s infinite;
    z-index: -1;
    pointer-events: none;
  }

  @keyframes pulse {
    0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(1.4); opacity: 0; }
  }

  /* Hide on very small screens if it overlaps too much content? 
     Actually it's a key conversion tool so keep it, maybe adjust size */
  @media (max-width: 480px) {
    .sticky-offer-btn {
      bottom: 1.5rem;
      right: 1.5rem;
      padding: 0.8rem 1.25rem;
      gap: 0.5rem;
      border-radius: 50px; /* Keep pill shape */
      width: auto;
      height: auto;
    }
    .text::before {
      content: 'OFFERTE'; /* Shorter text for mobile */
    }
    .text {
      display: inline-block;
      font-size: 0.8rem;
    }
    /* Hide the long original text */
    .text-full { display: none; }
  }

  
  /* If user prefers full text on mobile, remove the media query above or adjust */
</style>

<script>
  function initStickyObserver() {
    const stickyBtn = document.querySelector('.sticky-offer-btn');
    const contactSection = document.getElementById('contact');

    if (!stickyBtn) return;
    
    // Hide at the top of the page (Hero Section)
    const checkScroll = () => {
      // 30% of viewport height before showing up
      if (window.scrollY < window.innerHeight * 0.3) {
        stickyBtn.classList.add('hide-top');
      } else {
        stickyBtn.classList.remove('hide-top');
      }
    };
    
    window.addEventListener('scroll', checkScroll, { passive: true });
    checkScroll(); // Check once on init

    if (contactSection) {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            stickyBtn.classList.add('hide-sticky');
          } else {
            stickyBtn.classList.remove('hide-sticky');
          }
        });
      }, {
        threshold: 0, // Trigger as soon as the first pixel enters
        rootMargin: "0px"
      });

      observer.observe(contactSection);
    }
  }

  // Run on load
  initStickyObserver();

  // Re-run on Astro page transitions if applicable
  document.addEventListener('astro:after-swap', initStickyObserver);
</script>
