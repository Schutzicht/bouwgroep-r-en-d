---
---

<a href="mailto:info@rd-bouwgroep.nl?subject=Offerte Aanvraag" class="sticky-offer-btn">
  <div class="icon-pulse"></div>
  <span class="icon">ðŸ“„</span>
  <span class="text">Offerte Aanvragen</span>
</a>

<style>
  .sticky-offer-btn {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    z-index: 998; /* Below mobile menu (999) but above content */
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background-color: var(--color-primary);
    color: white;
    padding: 1rem 1.5rem;
    border-radius: 50px;
    box-shadow: 0 5px 20px rgba(227, 6, 19, 0.4);
    text-decoration: none;
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    font-family: var(--font-heading);
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.85rem;
    letter-spacing: 0.5px;
  }

  .sticky-offer-btn:hover {
    transform: translateY(-5px) scale(1.05);
    background-color: #b00000;
    box-shadow: 0 10px 30px rgba(227, 6, 19, 0.5);
  }

  .sticky-offer-btn.hide-sticky {
    opacity: 0;
    transform: translateY(100px);
    pointer-events: none;
  }

  .icon {
    font-size: 1.2rem;
  }

  /* Pulse Effect */
  .icon-pulse {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    border-radius: 50px;
    border: 2px solid var(--color-primary);
    animation: pulse 2s infinite;
    z-index: -1;
    pointer-events: none;
  }

  @keyframes pulse {
    0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(1.4); opacity: 0; }
  }

  /* Hide on very small screens if it overlaps too much content? 
     Actually it's a key conversion tool so keep it, maybe adjust size */
  @media (max-width: 480px) {
    .sticky-offer-btn {
      bottom: 1.5rem;
      right: 1.5rem;
      padding: 0.8rem 1.2rem;
    }
    .text {
      display: none; /* Icon only on mobile to save space? Or stick to full */
    }
    .sticky-offer-btn {
      width: 50px;
      height: 50px;
      padding: 0;
      justify-content: center;
      border-radius: 50%;
    }
    .icon { margin: 0; }
  }
  
  /* If user prefers full text on mobile, remove the media query above or adjust */
</style>

<script>
  function initStickyObserver() {
    const stickyBtn = document.querySelector('.sticky-offer-btn');
    const contactSection = document.getElementById('contact');

    if (stickyBtn && contactSection) {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            stickyBtn.classList.add('hide-sticky');
          } else {
            stickyBtn.classList.remove('hide-sticky');
          }
        });
      }, {
        threshold: 0, // Trigger as soon as the first pixel enters
        rootMargin: "0px"
      });

      observer.observe(contactSection);
    }
  }

  // Run on load
  initStickyObserver();

  // Re-run on Astro page transitions if applicable
  document.addEventListener('astro:after-swap', initStickyObserver);
</script>
