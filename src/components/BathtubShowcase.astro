---
---

<section class="bathtub-showcase">
  <div class="parallax-bg"></div>
  <div class="container relative-z">
    <div class="showcase-grid">
      <div class="content-col">
        <span class="eyebrow">Wellness & Comfort</span>
        <h2>Uw Oase van <span class="text-primary">Rust</span></h2>
        <div class="title-underline"></div>
        <p>Ervaar de ultieme ontspanning in uw eigen badkamer. Wij realiseren wellness ruimtes met oog voor detail, comfort en esthetiek.</p>
        <a href="#contact" class="btn-primary">Vraag advies aan</a>
      </div>
      
      <div class="image-col">
        <div class="bathtub-wrapper">
          <img 
            src="/badkuip-hero.png" 
            alt="Luxe Vrijstaand Bad" 
            class="bathtub-image"
          />
          <div class="steam-effect"></div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .bathtub-showcase {
    min-height: 80vh;
    padding: 6rem 0;
    position: relative;
    display: flex;
    align-items: center;
    overflow: hidden;
    background: radial-gradient(circle at 30% 50%, #1a1a1a 0%, #000 100%);
  }

  .parallax-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 120%;
    background-image: url('https://www.rd-bouwgroep.nl/wp-content/uploads/2024/06/badkamer.jpg');
    background-size: cover;
    background-position: center;
    opacity: 0.1;
    mix-blend-mode: luminosity;
  }

  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 2rem;
    width: 100%;
  }

  .showcase-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4rem;
    align-items: center;
  }

  /* Content Animation */
  .content-col {
    opacity: 0;
    transform: translateX(-50px);
    transition: all 1s ease-out;
  }

  .content-col.visible {
    opacity: 1;
    transform: translateX(0);
  }

  /* ... text styles same ... */
  .eyebrow {
    color: var(--color-primary);
    text-transform: uppercase;
    letter-spacing: 3px;
    font-size: 0.9rem;
    font-weight: 700;
    display: block;
    margin-bottom: 1rem;
  }

  h2 {
    color: white;
    font-size: 3.5rem;
    font-weight: 800;
    margin: 0 0 1.5rem;
    line-height: 1.1;
  }

  .title-underline {
    width: 80px;
    height: 4px;
    background: var(--color-primary);
    margin-bottom: 2rem;
  }

  p {
    color: #ccc;
    font-size: 1.15rem;
    line-height: 1.8;
    margin-bottom: 2.5rem;
    max-width: 500px;
  }

  .btn-primary {
    background-color: var(--color-primary);
    color: white;
    padding: 1rem 2.5rem;
    border-radius: 4px;
    font-size: 1.1rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.3s ease;
    display: inline-block;
  }

  .btn-primary:hover {
    background-color: #b00000;
    transform: translateY(-3px);
    box-shadow: 0 10px 20px rgba(227, 6, 19, 0.3);
  }

  /* Image Column & Animation */
  .image-col {
    position: relative;
    perspective: 1000px;
    /* Hide overflow so it enters from edge "cleanly" if needed */
  }

  .bathtub-wrapper {
    position: relative;
    /* Initial state set by JS, but defaults for SSR */
    transform: translateX(100px); 
    opacity: 0;
    will-change: transform, opacity;
  }

  .bathtub-image {
    width: 120%;
    max-width: 800px;
    height: auto;
    filter: drop-shadow(0 30px 60px rgba(0,0,0,0.8));
    position: relative;
    overflow: hidden;
    border-radius: var(--radius-sm);
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    margin-left: -10%;
  }

  .steam-effect {
    position: absolute;
    bottom: -20%;
    left: 10%;
    width: 80%;
    height: 60%;
    background: radial-gradient(ellipse at center, rgba(255,255,255,0.1) 0%, transparent 70%);
    filter: blur(40px);
    opacity: 0;
    transition: opacity 1s ease;
  }

  .bathtub-wrapper.visible .steam-effect {
    opacity: 0.6;
  }

  @media (max-width: 1024px) {
    .bathtub-showcase {
      padding: 4rem 0;
      min-height: auto;
    }
    .showcase-grid {
      grid-template-columns: 1fr;
      gap: 3rem;
      text-align: center;
    }
    .content-col {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .title-underline {
      margin-left: auto;
      margin-right: auto;
    }
    h2 {
      font-size: 2.5rem;
    }
    p {
      margin-left: auto;
      margin-right: auto;
    }
    .bathtub-wrapper {
      transform: translateY(50px);
    }
    .bathtub-image {
      width: 100%;
      margin-left: 0;
    }
  }

</style>

<script>
  // Heavy Physics Animation using Lerp (Linear Interpolation)
  const section = document.querySelector('.bathtub-showcase');
  const tub = document.querySelector('.bathtub-wrapper') as HTMLElement;
  const content = document.querySelector('.content-col');

  let currentX = 400; // Starting far right
  let targetX = 400;
  let currentOpacity = 0;
  let targetOpacity = 0;

  function lerp(start, end, factor) {
    return start + (end - start) * factor;
  }

  function animate() {
    if (!tub || !section) return;

    const rect = section.getBoundingClientRect();
    const windowHeight = window.innerHeight;
    
    // Calculate progress based on Section's position in viewport
    // We want it to be fully visible when centered, but leave EARLY when scrolling away.
    const sectionCenter = rect.top + (rect.height / 2);
    const windowCenter = windowHeight / 2;
    
    // Distance from center of screen (0 means perfectly centered)
    const distFromCenter = sectionCenter - windowCenter;
    
    // Create a "Zone" around the center where it is visible.
    // As it moves away from center (up or down), progress drops.
    // Zone Height: 800px up or down
    const zone = 800; 
    
    // Normalized 0 to 1 based on distance from center
    // 1 = Center, 0 = >zone away
    let progress = 1 - (Math.abs(distFromCenter) / zone);
    progress = Math.max(0, Math.min(1, progress)); 

    // Remove the exponential dropoff (was 1.5) to keep it smoother/longer
    // progress = Math.pow(progress, 1); // Linear is smoother for long visibility

    // Map progress to Target Properties
    // Check if mobile for different animation logic
    const isMobile = window.innerWidth <= 1024;
    const slideDist = isMobile ? 150 : 400; // Less slide on mobile

    targetX = slideDist - (progress * slideDist); 
    targetOpacity = progress;

    // Apply Lerp for "Heaviness/Lag"
    // 0.08 is heavy.
    currentX = lerp(currentX, targetX, 0.08);
    currentOpacity = lerp(currentOpacity, targetOpacity, 0.08);

    // Apply Styles
    // Also adding a rotation twist relative to position
    const rotateY = (currentX / 400) * -20; // More dramatmic twist
    
    tub.style.transform = `translateX(${currentX}px) rotateY(${rotateY}deg)`;
    tub.style.opacity = currentOpacity.toFixed(3);
    
    // Simple toggle for steam/text
    // Trigger "visible" class later to avoid text flickering
    if (progress > 0.6) {
      tub.classList.add('visible');
      if (content) content.classList.add('visible');
    } else {
      tub.classList.remove('visible');
      if (content) content.classList.remove('visible');
    }

    requestAnimationFrame(animate);
  }

  // Start Loop
  if (section && tub) {
    requestAnimationFrame(animate);
  }
</script>
